# 🧩 Sistema de Usuários — FastAPI + Supabase + Jinja2

Este projeto é uma aplicação web desenvolvida com **FastAPI**, **Supabase** e **Jinja2**.
Ela permite **listar, cadastrar, atualizar e excluir usuários** armazenados em um banco de dados hospedado no **Supabase**.

---

## 🚀 Tecnologias utilizadas

* **[FastAPI](https://fastapi.tiangolo.com/)** — Framework web moderno e rápido para APIs em Python.
* **[Supabase](https://supabase.com/)** — Banco de dados e autenticação backend (alternativa open-source ao Firebase).
* **[Jinja2](https://jinja.palletsprojects.com/)** — Engine de templates para renderizar HTML.
* **[Python Dotenv](https://pypi.org/project/python-dotenv/)** — Carrega variáveis de ambiente do arquivo `.env`.
* **Pydantic** — Validação de dados com tipagem.
* **Uvicorn** — Servidor ASGI para executar o FastAPI.

---

## 📂 Estrutura de pastas

```
projeto/
│
├── main.py                # Código principal do FastAPI
├── .env                   # Variáveis de ambiente (não versionar)
│
├── templates/             # Páginas HTML renderizadas pelo Jinja2
│   ├── home.html
│   └── cadastro.html
│
├── static/                # Arquivos estáticos (CSS, JS, imagens)
│   ├── css/
│   └── js/
│
└── requirements.txt       # Lista de dependências
```

---

## ⚙️ Configuração do ambiente

### 1. Clone o repositório

```bash
git clone https://github.com/seu-usuario/seu-repo.git
cd seu-repo
```


### 3. Instale as dependências

Crie um arquivo `requirements.txt` com o seguinte conteúdo (ou use o abaixo diretamente):

```
fastapi
uvicorn
python-dotenv
supabase
jinja2
pydantic
```

Em seguida, instale-as com:

```bash
pip install -r requirements.txt
```

---

## 🔑 Configuração do Supabase (.env)

Crie um arquivo chamado `.env` na raiz do projeto e adicione suas credenciais do Supabase:

```
SUPABASE_URL=https://seu-projeto.supabase.co
SUPABASE_KEY=sua-chave-secreta
```

Essas informações podem ser encontradas no **painel do Supabase**, em
**Project Settings → API → Project URL e Anon/Public Key**.

---

## ▶️ Executando o projeto

Para iniciar o servidor FastAPI com **Uvicorn**, execute:

```bash
uvicorn main:app --reload
```

* `main`: nome do arquivo principal (`main.py`)
* `app`: nome da instância FastAPI (`app = FastAPI()`)
* `--reload`: recarrega automaticamente ao salvar alterações (modo desenvolvimento)

O servidor será iniciado em:
👉 **[http://127.0.0.1:8000](http://127.0.0.1:8000)**

---

## 🌐 Rotas disponíveis

### 🔹 Frontend

| Rota        | Método | Descrição                      |
| ----------- | ------ | ------------------------------ |
| `/`         | GET    | Página inicial (home.html)     |
| `/cadastro` | GET    | Página de cadastro de usuários |

### 🔹 API (Backend)

| Rota             | Método | Descrição                           |
| ---------------- | ------ | ----------------------------------- |
| `/usuarios`      | GET    | Lista todos os usuários             |
| `/usuarios/{id}` | GET    | Retorna usuário pelo ID             |
| `/usuarios`      | POST   | Cria novo usuário (`nome`, `email`) |
| `/usuarios/{id}` | PUT    | Atualiza usuário existente          |
| `/usuarios/{id}` | DELETE | Remove usuário existente            |

---

## 🧠 Dicas

* O middleware **CORS** está liberado para todas as origens (`*`) — ótimo para desenvolvimento, mas deve ser restringido em produção.
* O projeto depende das pastas `templates/` e `static/`, então mantenha-as no mesmo diretório do `main.py`.
* As tabelas no Supabase devem estar configuradas conforme o modelo:

  ```sql
  create table Usuario (
      id bigint generated by default as identity primary key,
      nome text not null,
      email text not null
  );
  ```

---

## 💻 Exemplo de teste via cURL

Criar um novo usuário:

```bash
curl -X POST -F "nome=Maria" -F "email=maria@example.com" http://127.0.0.1:8000/usuarios
```

Listar usuários:

```bash
curl http://127.0.0.1:8000/usuarios
```

---

## 🔑 Configuração do banco de dados Supabase

O **Supabase** é usado como backend (banco de dados PostgreSQL + API REST automática).
Você precisa de uma conta gratuita em [https://supabase.com](https://supabase.com).

### Passos:

1. **Crie um projeto no Supabase**

   * Acesse o painel e clique em **“New Project”**.
   * Dê um nome e escolha uma senha para o banco.
   * Espere a inicialização.

2. **Crie a tabela `Usuario`**

   * No painel lateral, vá em **Table Editor → Create Table**.
   * Nome: `Usuario`
   * Adicione as colunas:

     | Nome  | Tipo   | Atributos                   |
     | ----- | ------ | --------------------------- |
     | id    | bigint | primary key, auto increment |
     | nome  | text   | not null                    |
     | email | text   | not null                    |

3. **Obtenha as credenciais**

   * Vá em **Settings → API**.
   * Copie:

     * **Project URL**
     * **Anon Key**

4. **Crie o arquivo `.env`** na raiz do projeto e adicione:

   ```
   SUPABASE_URL=https://SEU-PROJETO.supabase.co
   SUPABASE_KEY=sua-chave-anon-ou-service-role
   ```

Essas variáveis serão lidas automaticamente pelo código com `load_dotenv()` e usadas para conectar ao Supabase.

---

## ▶️ Executando o projeto

Após configurar o `.env`, rode o servidor com:

```bash
uvicorn main:app --reload
```

🔗 O servidor ficará disponível em:
👉 **[http://127.0.0.1:8000](http://127.0.0.1:8000)**

Se tudo estiver certo, você verá no console algo como:

```
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

---

## 🌐 Rotas disponíveis

### 🔹 Frontend

| Rota        | Método | Descrição                      |
| ----------- | ------ | ------------------------------ |
| `/`         | GET    | Página inicial (home.html)     |
| `/cadastro` | GET    | Página de cadastro de usuários |

### 🔹 API (Backend)

| Rota             | Método | Descrição                           |
| ---------------- | ------ | ----------------------------------- |
| `/usuarios`      | GET    | Lista todos os usuários             |
| `/usuarios/{id}` | GET    | Retorna usuário pelo ID             |
| `/usuarios`      | POST   | Cria novo usuário (`nome`, `email`) |
| `/usuarios/{id}` | PUT    | Atualiza usuário existente          |
| `/usuarios/{id}` | DELETE | Remove usuário existente            |

---

## 🧠 Dicas

* O middleware **CORS** está liberado para todas as origens (`*`), o que facilita testes com o navegador.
  Em produção, limite os domínios autorizados.
* Mantenha as pastas `templates/` e `static/` no mesmo diretório do arquivo `main.py`.
* Para testar o backend, você pode usar **Thunder Client**, **Insomnia** ou **Postman**.

---

## 📜 Licença

Este projeto é de uso livre para fins de estudo e desenvolvimento.
Sinta-se à vontade para modificar, melhorar e reutilizar.

Este projeto é livre para uso em estudos e demonstrações.
Sinta-se à vontade para modificar e adaptar conforme sua necessidade.

